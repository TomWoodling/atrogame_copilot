[gd_scene load_steps=45 format=3 uid="uid://d2bnjwmqvrd2f"]

[ext_resource type="Script" path="res://scripts/player_movement.gd" id="1_8tlry"]
[ext_resource type="PackedScene" uid="uid://d4ilkphiful78" path="res://assets/models/snaut/meshy_snaut.blend" id="2_ebafd"]
[ext_resource type="Script" path="res://scripts/scan_ray_controller.gd" id="3_ojvvn"]
[ext_resource type="Script" path="res://scripts/player_animation.gd" id="3_sj2hs"]
[ext_resource type="Script" path="res://scripts/player_camera.gd" id="3_sq2kc"]
[ext_resource type="Script" path="res://scripts/fall_detector.gd" id="6_glh6w"]
[ext_resource type="Texture2D" uid="uid://nmtatuoftlbc" path="res://assets/textures/shadowplane.png" id="7_wqvk7"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xg8dx"]
animation = &"Falling"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_u8qlt"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0oesn"]
animation = &"Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_drspq"]
animation = &"Run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0wcmu"]
animation = &"Splat"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j2m5k"]
animation = &"Stand"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6pbkl"]
animation = &"Success"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7orq4"]
animation = &"Walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kjfmp"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7fmof"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bjaqo"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hu08s"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2m42o"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g15sg"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cv6ly"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fsh6v"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_aj1p6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_r5rhb"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i4y7w"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cjdgq"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_chai2"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b5pn1"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_brrkf"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_p0lwn"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_n8732"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k1oqp"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_awd2e"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_im2l0"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_81kac"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pxsdm"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_omx6p"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5duoc"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_83p5h"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_tlftn"]
states/Falling/node = SubResource("AnimationNodeAnimation_xg8dx")
states/Falling/position = Vector2(811, 72)
states/Idle/node = SubResource("AnimationNodeAnimation_u8qlt")
states/Idle/position = Vector2(374, 87)
states/Jump/node = SubResource("AnimationNodeAnimation_0oesn")
states/Jump/position = Vector2(633, 194)
states/Run/node = SubResource("AnimationNodeAnimation_drspq")
states/Run/position = Vector2(285, 221)
states/Splat/node = SubResource("AnimationNodeAnimation_0wcmu")
states/Splat/position = Vector2(830, 149)
states/Stand/node = SubResource("AnimationNodeAnimation_j2m5k")
states/Stand/position = Vector2(905, 238)
states/Success/node = SubResource("AnimationNodeAnimation_6pbkl")
states/Success/position = Vector2(538, 256)
states/Walk/node = SubResource("AnimationNodeAnimation_7orq4")
states/Walk/position = Vector2(556, 89)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_kjfmp"), "Idle", "Walk", SubResource("AnimationNodeStateMachineTransition_7fmof"), "Walk", "Idle", SubResource("AnimationNodeStateMachineTransition_bjaqo"), "Walk", "Run", SubResource("AnimationNodeStateMachineTransition_hu08s"), "Run", "Walk", SubResource("AnimationNodeStateMachineTransition_2m42o"), "Idle", "Jump", SubResource("AnimationNodeStateMachineTransition_g15sg"), "Jump", "Idle", SubResource("AnimationNodeStateMachineTransition_cv6ly"), "Jump", "Walk", SubResource("AnimationNodeStateMachineTransition_fsh6v"), "Walk", "Jump", SubResource("AnimationNodeStateMachineTransition_aj1p6"), "Jump", "Run", SubResource("AnimationNodeStateMachineTransition_r5rhb"), "Run", "Jump", SubResource("AnimationNodeStateMachineTransition_i4y7w"), "Jump", "Falling", SubResource("AnimationNodeStateMachineTransition_cjdgq"), "Walk", "Falling", SubResource("AnimationNodeStateMachineTransition_chai2"), "Run", "Falling", SubResource("AnimationNodeStateMachineTransition_b5pn1"), "Falling", "Splat", SubResource("AnimationNodeStateMachineTransition_brrkf"), "Splat", "Stand", SubResource("AnimationNodeStateMachineTransition_p0lwn"), "Stand", "Idle", SubResource("AnimationNodeStateMachineTransition_n8732"), "Success", "Idle", SubResource("AnimationNodeStateMachineTransition_k1oqp"), "Success", "Walk", SubResource("AnimationNodeStateMachineTransition_awd2e"), "Success", "Jump", SubResource("AnimationNodeStateMachineTransition_im2l0"), "Idle", "Success", SubResource("AnimationNodeStateMachineTransition_81kac"), "Run", "Success", SubResource("AnimationNodeStateMachineTransition_pxsdm"), "Success", "Run", SubResource("AnimationNodeStateMachineTransition_omx6p"), "Walk", "Success", SubResource("AnimationNodeStateMachineTransition_5duoc"), "Jump", "Success", SubResource("AnimationNodeStateMachineTransition_83p5h")]
graph_offset = Vector2(16, 32)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8q5u3"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fgfel"]
transparency = 4
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("7_wqvk7")

[sub_resource type="PlaneMesh" id="PlaneMesh_r5kj0"]
material = SubResource("StandardMaterial3D_fgfel")
size = Vector2(1, 1)

[node name="player" type="CharacterBody3D" groups=["player"]]
script = ExtResource("1_8tlry")

[node name="meshy_snaut" parent="." instance=ExtResource("2_ebafd")]

[node name="Skeleton3D" parent="meshy_snaut/Armature" index="0"]
transform = Transform3D(-1, 8.74228e-08, 0, -8.74228e-08, -1, 0, 0, 0, 1, 0, 0, 0)
bones/0/position = Vector3(-0.280806, -8.46601, -71.924)
bones/0/rotation = Quaternion(-0.29493, 0.0597898, -0.0626472, 0.951586)
bones/1/rotation = Quaternion(-0.0165545, -0.0100767, -0.00178939, 0.999811)
bones/2/position = Vector3(3.57628e-07, 12.3761, -4.61936e-07)
bones/2/rotation = Quaternion(-0.0606693, -0.0176296, -0.0175368, 0.997848)
bones/3/position = Vector3(2.98023e-07, 14.1442, 5.51343e-07)
bones/3/rotation = Quaternion(-0.0606623, -0.0177922, -0.0173696, 0.997849)
bones/4/rotation = Quaternion(-0.150153, -0.0374931, 0.0619116, 0.98601)
bones/5/rotation = Quaternion(0.0602681, -0.0939793, 0.106386, 0.988037)
bones/7/rotation = Quaternion(0.665014, 0.374177, -0.388252, 0.516729)
bones/8/position = Vector3(4.06406e-07, 19.1506, 9.13414e-06)
bones/8/rotation = Quaternion(0.238348, -0.278345, -0.0571862, 0.928679)
bones/9/position = Vector3(-2.786e-06, 15.4464, 2.24824e-06)
bones/9/rotation = Quaternion(-0.00838974, -0.00136966, 0.302477, 0.953119)
bones/10/position = Vector3(-4.01489e-06, 22.1038, 4.75931e-06)
bones/10/rotation = Quaternion(-0.264064, 0.0568049, 0.0121317, 0.962754)
bones/11/position = Vector3(-4.78744, 3.19319, -2.62261e-06)
bones/11/rotation = Quaternion(-0.0303206, 0.0396902, 0.430482, 0.901216)
bones/12/position = Vector3(0.57437, 4.56776, -1.01141e-06)
bones/12/rotation = Quaternion(0.011124, 0.0237451, -0.173504, 0.984484)
bones/13/position = Vector3(-1.41622, 5.88007, 8.8446e-07)
bones/13/rotation = Quaternion(-0.0109021, 0.000555097, 0.193893, 0.980962)
bones/14/position = Vector3(0.841852, 4.1057, -2.85619e-06)
bones/15/position = Vector3(1.56858e-06, 11.4574, -1.17439e-07)
bones/15/rotation = Quaternion(-0.193126, 0.0350715, 0.0918075, 0.97624)
bones/16/position = Vector3(0.528771, 7.33522, -7.74542e-06)
bones/16/rotation = Quaternion(0.00026519, 0.000595697, -0.065, 0.997885)
bones/17/position = Vector3(-0.358636, 6.13156, 2.38158e-06)
bones/17/rotation = Quaternion(-0.0560586, -0.00193675, -0.0202074, 0.998221)
bones/18/position = Vector3(-0.170134, 4.72032, 4.78072e-07)
bones/19/position = Vector3(-9.34887, 13.8244, 0.0555096)
bones/19/rotation = Quaternion(0.531455, -0.448987, 0.585083, 0.416706)
bones/20/position = Vector3(1.19965e-06, 19.1506, 2.33641e-06)
bones/20/rotation = Quaternion(-0.0784919, 0.633203, -0.0169289, 0.769809)
bones/21/position = Vector3(1.16527e-05, 15.4372, 4.798e-06)
bones/21/rotation = Quaternion(-0.0127314, -2.704e-05, -0.490148, 0.871546)
bones/22/position = Vector3(-3.38136e-06, 22.1029, 3.77805e-06)
bones/22/rotation = Quaternion(-0.208201, -0.0520404, 0.0193945, 0.976508)
bones/23/position = Vector3(4.39464, 3.52183, 1.16226e-06)
bones/23/rotation = Quaternion(-0.0213549, -0.0453101, -0.462608, 0.885147)
bones/24/position = Vector3(-0.751416, 4.44226, 1.94613e-06)
bones/24/rotation = Quaternion(0.0174092, -0.0277492, 0.203363, 0.978555)
bones/25/rotation = Quaternion(-0.0195933, -0.00178121, -0.208317, 0.977864)
bones/26/position = Vector3(-0.843879, 4.6739, -2.32157e-06)
bones/27/position = Vector3(-5.86172e-06, 10.0001, 1.69356e-06)
bones/27/rotation = Quaternion(-0.0477001, 0.00524018, -0.239975, 0.969592)
bones/28/position = Vector3(-1.06202, 7.98587, -3.01871e-06)
bones/28/rotation = Quaternion(0.11175, -0.00137302, 0.0612584, 0.991846)
bones/29/position = Vector3(0.637765, 6.65575, 4.10947e-06)
bones/29/rotation = Quaternion(-0.0477465, 0.00345514, 0.0167229, 0.998714)
bones/30/position = Vector3(0.424246, 5.03555, 5.97254e-06)
bones/31/position = Vector3(12.7036, -5.90074, 1.1257)
bones/31/rotation = Quaternion(0.12388, 0.283254, 0.919553, -0.242575)
bones/32/position = Vector3(-9.79914e-06, 25.1318, 1.09942e-06)
bones/32/rotation = Quaternion(-0.682572, -0.000377583, 0.0426827, 0.729571)
bones/33/position = Vector3(-1.31919e-06, 21.1243, -1.7636e-06)
bones/33/rotation = Quaternion(0.147987, 0.0033103, -0.204165, 0.967681)
bones/34/position = Vector3(-2.3134e-06, 27.4745, -1.41379e-06)
bones/34/rotation = Quaternion(0.361599, -0.103364, 0.0396821, 0.925736)
bones/35/position = Vector3(-2.52575e-06, 10.4883, -5.60284e-06)
bones/36/position = Vector3(-12.7036, -5.90074, 1.03456)
bones/36/rotation = Quaternion(-0.16062, 0.162825, 0.945751, 0.230748)
bones/37/position = Vector3(1.86369e-06, 25.129, 5.88443e-07)
bones/37/rotation = Quaternion(-0.284126, 0.0202424, -0.0572914, 0.95686)
bones/38/rotation = Quaternion(0.176489, 0.0447656, 0.290266, 0.939465)
bones/39/position = Vector3(-7.14993e-06, 27.6502, -1.80373e-06)
bones/39/rotation = Quaternion(0.317577, 0.104015, -0.0351956, 0.941853)
bones/40/position = Vector3(3.92646e-06, 10.4547, 8.04663e-07)

[node name="AnimationTree" type="AnimationTree" parent="meshy_snaut"]
tree_root = SubResource("AnimationNodeStateMachine_tlftn")
advance_expression_base_node = NodePath("../..")
anim_player = NodePath("../AnimationPlayer")
script = ExtResource("3_sj2hs")

[node name="ScanRay" type="RayCast3D" parent="meshy_snaut" groups=["scan_ray"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 0)
target_position = Vector3(0, 0, -10)
collision_mask = 8
debug_shape_custom_color = Color(0.2, 0.8, 1, 0.5)
script = ExtResource("3_ojvvn")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.982487, 0)
shape = SubResource("CapsuleShape3D_8q5u3")

[node name="CameraRig" type="Node3D" parent="."]
script = ExtResource("3_sq2kc")

[node name="SpringArm3D" type="SpringArm3D" parent="CameraRig"]
spring_length = 3.0

[node name="Camera3D" type="Camera3D" parent="CameraRig/SpringArm3D"]

[node name="FallDetector" type="RayCast3D" parent="."]
target_position = Vector3(0, -10, 0)
debug_shape_custom_color = Color(1, 0.5, 1, 0.5)
script = ExtResource("6_glh6w")

[node name="ShadowPlane" type="MeshInstance3D" parent="."]
mesh = SubResource("PlaneMesh_r5kj0")

[connection signal="animation_finished" from="meshy_snaut/AnimationTree" to="meshy_snaut/AnimationTree" method="_on_animation_finished"]

[editable path="meshy_snaut"]
